---
import HorizontalCard from "../components/HorizontalCard.astro";

const { title, featured, extra, seeMoreLabel } = Astro.props;
---
<>
  <div id="projects" class="mb-5">
    <div class="text-3xl w-full font-bold text-center">{title}</div>
  </div>

  <div class="grid grid-cols-1 gap-6 lg:grid-cols-2">
    {featured.map((project) => (
      <HorizontalCard {...project} />
    ))}
  </div>
  <div
    id="extra-projects"
    class="hidden grid grid-cols-1 gap-6 lg:grid-cols-2"
    aria-hidden="true"
  >
    {extra.map((project) => (
      <HorizontalCard {...project} />
    ))}
  </div>
  <div class="button-container">
    <button
      id="toggleButton"
      class="see-more-button"
      type="button"
      aria-expanded="false"
      aria-controls="extra-projects"
    >
      {seeMoreLabel}
    </button>
  </div>
  <script is:inline>
    (() => {
      const init = () => {
        const extraProjects = document.getElementById('extra-projects');
        const button = document.getElementById('toggleButton');
        if (!extraProjects || !button) return;
        button.addEventListener(
          'click',
          () => {
            extraProjects.classList.remove('hidden');
            extraProjects.setAttribute('aria-hidden', 'false');
            button.setAttribute('aria-expanded', 'true');
            button.classList.add('hidden');
          },
          { once: true }
        );
      };
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', init, { once: true });
      } else {
        init();
      }
    })();
  </script>

  <style>
    .hidden {
      display: none;
    }
    .button-container {
      display: flex;
      justify-content: center;
      margin-top: 0.5rem;
      margin-bottom: 1.5rem;
    }
    .see-more-button {
      padding: 0.5rem 1rem;
      background-color: #0934ac;
      color: white;
      font-weight: bold;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .see-more-button:hover {
      background-color: #2563eb;
      transform: scale(1.05);
    }
    .see-more-button:active {
      transform: scale(0.95);
    }
  </style>
</>
