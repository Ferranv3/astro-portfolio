---
import styles from './backgroundText.module.css';

const { text, top, bottom, fromLeft, animationTime } = Astro.props;

const numericPattern = /^-?\d+(?:\.\d+)?$/;
const formatPosition = (value: string | number | undefined) => {
  if (value === undefined || value === null || value === '') {
    return undefined;
  }

  if (typeof value === 'number') {
    return `${value}%`;
  }

  return numericPattern.test(value) ? `${value}%` : value;
};

const positionStyles = {
  ...(formatPosition(top) ? { top: formatPosition(top) } : {}),
  ...(formatPosition(bottom) ? { bottom: formatPosition(bottom) } : {}),
};
---

<div class={styles.container} style={positionStyles}>
  <p
    class={fromLeft ? `${styles.text} ${styles.left}` : `${styles.text} ${styles.right}`}
    style={{
      animationDuration: `${animationTime}s`,
    }}
  >
    {text}
  </p>
</div>

