---
import { Image } from "astro:assets";
import CalendarIcon from "./icons/CalendarIcon";
import LinkedinIcon from "./icons/LinkedinIcon";
import GithubIcon from "./icons/GithubIcon";

const {
  labels,
  homeHref = "/",
  contactEmail = "ferranhpv3@gmail.com",
} = Astro.props;

const sectionHref = (hash: string) => `${homeHref}${hash}`;
---

<div class="drawer-side bg-base-200">
  <label for="my-drawer" class="drawer-overlay bg-base-200"></label>
  <div
    class="menu flex flex-col items-center flex-nowrap py-2 overflow-y-auto w-[20rem] bg-base-200 text-base-content justify-between h-screen min-h-[100dvh]"
  >
    <div class="w-fit min-h-1">
      <a href={homeHref}>
        <div
          class="avatar transition ease-in-out w-1/2 hover:scale-[102%] block m-auto mt-3 mb-6 h-36"
        >
          <div>
            <Image
              class="mask mask-circle"
              format="webp"
              width={300}
              height={300}
              src="/profile.webp"
              alt="Profile image"
              loading="lazy"
              decoding="async"
            />
          </div>
        </div>
      </a>
    </div>
    <ul class="min-h-1 -mt-9">
      <li><a class="menu" id="home" href={homeHref}>{labels.home}</a></li>
      <li><a class="menu" id="projects" href={sectionHref("#projects")}>{labels.projects}</a></li>
      <li><a class="menu" id="experience" href={sectionHref("#experience")}>{labels.experience}</a></li>
      <li><a class="menu" id="education" href={sectionHref("#education")}>{labels.education}</a></li>
      <li><a class="menu" id="languages" href={sectionHref("#languages")}>{labels.languages}</a></li>
      <li><a class="menu" id="certifications" href={sectionHref("#certifications")}>{labels.certifications}</a></li>
      <li><a class="menu" id="skills" href={sectionHref("#skills")}>{labels.skills}</a></li>
      <li><a class="menu" href={`mailto:${contactEmail}`}>{labels.contact}</a></li>
    </ul>
    <div class="social-icons px-4 my-2 flex self-center min-h-3">
      <a
        href="https://github.com/Ferranv3"
        target="_blank"
        class="mx-3"
        aria-label="Github"
        title="Github"
      >
        <GithubIcon />
      </a>
      <a
        href="https://www.linkedin.com/in/ferran-hernandez-v3/"
        target="_blank"
        class="mx-3"
        aria-label="Linkedin"
        title="Linkedin"
      >
        <LinkedinIcon />
      </a>
      <a
        href="https://calendly.com/d/cwgs-txt-yqj/meeting"
        target="_blank"
        class="mx-3"
        aria-label="Calendly"
        title="Calendly"
      >
        <CalendarIcon />
      </a>
    </div>
  </div>
</div>

<script>
  const myDrawer = document.querySelector('#my-drawer');
  const links = document.querySelectorAll('a.menu');

  function toggleMenu() {
    myDrawer.checked = !myDrawer.checked;
  }

  // Maneja los clics en cada botÃ³n.
  links.forEach((button) => {
    button.addEventListener('click', () => {
      toggleMenu();
    });
  });
</script>

<style>
  @media (max-width: 640px) {
    .drawer-side .menu li a.menu {
      width: 100%;
      padding: 0.9rem 1.5rem;
      font-size: clamp(1rem, 4vw, 1.125rem);
    }
  }
</style>
