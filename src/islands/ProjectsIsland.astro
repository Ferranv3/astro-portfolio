---
import HorizontalCard from "../components/HorizontalCard.astro";

const { title, featured, extra, seeMoreLabel } = Astro.props;
---
<>
  <div id="projects" class="mb-5">
    <div class="text-3xl w-full font-bold text-center">{title}</div>
  </div>

  {featured.map((project) => (
    <HorizontalCard {...project} />
  ))}
  <div id="extra-projects" class="hidden">
    {extra.map((project) => (
      <>
        <div class="divider my-0"></div>
        <HorizontalCard {...project} />
      </>
    ))}
  </div>
  <div class="button-container">
    <button id="toggleButton" class="see-more-button">
      {seeMoreLabel}
    </button>
  </div>
  <script is:inline>
    (() => {
      const extraProjects = document.getElementById('extra-projects');
      const button = document.getElementById('toggleButton');
      if (!extraProjects || !button) return;
      const label = {JSON.stringify(seeMoreLabel)};
      button.addEventListener('click', () => {
        if (extraProjects.classList.contains('hidden')) {
          extraProjects.classList.remove('hidden');
          button.classList.add('hidden');
        } else {
          extraProjects.classList.add('hidden');
          button.textContent = label;
        }
      });
    })();
  </script>

  <style>
    .hidden {
      display: none;
    }
    .button-container {
      display: flex;
      justify-content: center;
      margin-top: 0.5rem;
      margin-bottom: 1.5rem;
    }
    .see-more-button {
      padding: 0.5rem 1rem;
      background-color: #0934ac;
      color: white;
      font-weight: bold;
      border-radius: 0.5rem;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .see-more-button:hover {
      background-color: #2563eb;
      transform: scale(1.05);
    }
    .see-more-button:active {
      transform: scale(0.95);
    }
  </style>
</>